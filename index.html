<!DOCTYPE html>
<html lang="pt-BR">

<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="styles.css"> <title>Virtual NFC - Conecte-se com um Toque</title>
</head>

<body>
<header>
<img src="logo.jpg" alt="Virtual NFC Logo">
<p>Conecte-se com um simples toque. Mostre seu estilo e sua marca.</p>
</header>

 <div class="section produtos">
<h2>‚ú® Nossos Produtos</h2>
<div class="grid-produtos">

<div class="card-produto" id="card-whatsapp">
 <div class="produto-imagem" id="img-whatsapp" style="background-image: url('cartaoNaoPersonalizado.jpeg');"></div>
 <h3>Cart√£o WhatsApp</h3> 
 <div class="options">
 <label>
  <input type="checkbox" name="group-whatsapp" value="100" data-name="1Ô∏è‚É£ Cart√£o WhatsApp Padr√£o" data-image="cartaoNaoPersonalizado.jpeg"> Padr√£o
  <span class="option-price">(R$ 100,00)</span>
 </label>
 <label>
  <input type="checkbox" name="group-whatsapp" value="110" data-name="‚û°Ô∏è Vers√£o personalizada (WhatsApp)" data-image="cartaoPersonalizado1.png"> Personalizada
  <span class="option-price">(R$ 110,00)</span>
 </label>
 </div>
</div>

<div class="card-produto" id="card-instagram">
 <div class="produto-imagem" id="img-instagram" style="background-image: url('cartaoNaoPersonalizado.jpeg');"></div>
 <h3>Cart√£o Instagram</h3>
 <div class="options">
 <label>
  <input type="checkbox" name="group-instagram" value="100" data-name="2Ô∏è‚É£ Cart√£o Instagram Padr√£o" data-image="cartaoNaoPersonalizado.jpeg"> Padr√£o
  <span class="option-price">(R$ 100,00)</span>
 </label>
 <label>
  <input type="checkbox" name="group-instagram" value="110" data-name="‚û°Ô∏è Vers√£o personalizada (Instagram)" data-image="cartaoPersonalizado1.png"> Personalizada
  <span class="option-price">(R$ 110,00)</span>
 </label>
 </div>
</div>

<div class="card-produto" id="card-pagina">
<div class="produto-imagem" id="img-pagina" style="background-image: url('cartaoNaoPersonalizado.jpeg');"></div>
<h3>Cart√£o P√°gina</h3>
<div class="options">
<label>
 <input type="checkbox" name="group-pagina" value="180" data-name="3Ô∏è‚É£ Cart√£o com p√°gina personalizada" data-image="cartaoNaoPersonalizado.jpeg"> Padr√£o
 <span class="option-price">(R$ 180,00)</span>
</label>
<label>
 <input type="checkbox" name="group-pagina" value="190" data-name="‚û°Ô∏è Vers√£o personalizada (p√°gina)" data-image="cartaoPersonalizado1.png"> Personalizada
 <span class="option-price">(R$ 190,00)</span>
</label>
</div>
</div>

<div class="card-produto" id="card-placa">
 <div class="produto-imagem" id="img-placa" style="background-image: url('placa_aproximacao.jpg');"></div>
 <h3>Placa NFC</h3>
 <div class="options">
 <label>
  <input type="checkbox" name="group-placa" value="120" data-name="‚û°Ô∏è Plaquinha de Instagram/Avalia√ß√£o Google/Wifi/WhatsApp" data-image="placa_aproximacao.jpg"> Selecionar Placa
  <span class="option-price">(R$ 120,00)</span>
 </label>
 </div>
</div>
</div>
</div>

<div class="section">
<h2>üõí Carrinho de Pedidos</h2>

 <button id="add">Atualizar Carrinho/Total</button>

<div class="cart" id="cart">
 <p>Selecione os produtos acima.</p>
</div>

<div class="total" id="total">Total: R$ 0,00</div>

<button class="whatsapp-btn" id="sendWhatsApp">Enviar pedido pelo WhatsApp</button>
</div>

<div class="section exemplos">
<h2>üåê Clientes Satisfeitos</h2>
<ul class="lista-exemplos">
<li><a href="https://douglassqueiroz18.github.io/espa-oGloriaJustino/" target="_blank"> Espa√ßo Gl√≥ria Justino</a></li>
<li><a href="https://douglassqueiroz18.github.io/silviaPipoqueira/" target="_blank"> Silvia Pipoqueira</a></li>
<li><a href="https://douglassqueiroz18.github.io/bigCenter/" target="_blank"> Big Center Imports</a></li>
<li><a href="https://douglassqueiroz18.github.io/goldenClinic/" target="_blank">Golden Clinic</a></li>
</ul>
</div>

<footer>
<p>¬© 2025 ‚Äî <strong>Virtual NFC</strong> | Tecnologia por aproxima√ß√£o</p>
</footer>

<script>
const cartDiv = document.getElementById("cart");
const totalDiv = document.getElementById("total");
const addBtn = document.getElementById("add");
const sendBtn = document.getElementById("sendWhatsApp");
// CORRIGIDO: Seleciona todos os checkboxes com names de grupo
const productCheckboxes = document.querySelectorAll('.card-produto input[type="checkbox"]');

let cart = [];
const whatsappNumber = "5567991846759";

// ----------------------------------------------------
// Fun√ß√£o para atualizar a imagem do produto
// ----------------------------------------------------
function updateCardImage(checkbox) {
  // Encontra o card pai (o .card-produto)
  const card = checkbox.closest('.card-produto');
  if (!card) return;

  // Encontra a div da imagem dentro do card
  const imageDiv = card.querySelector('.produto-imagem');
  const groupName = checkbox.name;

  if (checkbox.checked) {
   // Se marcado, usa a imagem do atributo data-image
   const newImage = checkbox.dataset.image;
   imageDiv.style.backgroundImage = `url('${newImage}')`;
  } else {
   // Se desmarcado, reverte para a imagem padr√£o se n√£o houver outro marcado no grupo
   const checkedSiblings = card.querySelectorAll(`input[name="${groupName}"]:checked`);
   
   if (checkedSiblings.length === 0) {
    // Reverte para a imagem da primeira op√ß√£o (que deve ser o padr√£o)
    const defaultOption = card.querySelector(`input[name="${groupName}"][data-image]`);
    if (defaultOption) {
     imageDiv.style.backgroundImage = `url('${defaultOption.dataset.image}')`;
    }
   }
  }
}


// Fun√ß√£o para recalcular e renderizar o carrinho
function renderCart() {
 cart = []; // Limpa o carrinho a cada renderiza√ß√£o/atualiza√ß√£o

 // Itera sobre todos os checkboxes de produto
 productCheckboxes.forEach(checkbox => {
  if (checkbox.checked) {
   // Adiciona o item ao carrinho se estiver marcado
   const value = Number(checkbox.value);
   // Pega o texto formatado do pre√ßo ao lado do checkbox
   const priceText = checkbox.parentNode.querySelector('.option-price').textContent; 
   const text = checkbox.dataset.name + ` ‚Äî ${priceText}`;
   cart.push({ text, value });
  }
 });

 cartDiv.innerHTML = "";
 let total = 0;

 if (cart.length === 0) {
  cartDiv.innerHTML = "<p>Selecione os produtos acima.</p>";
 } else {
  cart.forEach((item) => {
   const div = document.createElement("div");
   div.className = "cart-item";
   // Exibe o nome e o pre√ßo do item
   div.innerText = item.text;
   cartDiv.appendChild(div);
   total += item.value;
  });
 }

 totalDiv.innerText = `Total: R$ ${total.toFixed(2).replace('.', ',')}`;
}

// L√≥gica de sele√ß√£o √∫nica por grupo (produto) e ATUALIZA√á√ÉO DA IMAGEM
productCheckboxes.forEach(checkbox => {
 checkbox.addEventListener('change', function() {
  const groupName = this.name;
  
  if (this.checked) {
   // Desmarca outros checkboxes do mesmo grupo
   document.querySelectorAll(`input[name="${groupName}"]`).forEach(otherCheckbox => {
    if (otherCheckbox !== this) {
     otherCheckbox.checked = false;
    }
   });
  }
  
  // ATUALIZA√á√ÉO CHAVE: Chama a fun√ß√£o de troca de imagem e o carrinho
  updateCardImage(this);
  renderCart();
 });
});

// O bot√£o "Atualizar Carrinho/Total" mant√©m a fun√ß√£o de renderiza√ß√£o
addBtn.addEventListener("click", renderCart);


sendBtn.addEventListener("click", () => {
 // Garantir que o carrinho esteja atualizado antes de enviar
 renderCart();

 if (cart.length === 0) return alert("Adicione ao menos um item antes de enviar!");

 // Formata a mensagem do pedido
 const message = cart
  .map((item, i) => `${i + 1}. ${item.text}`)
  .join("%0A");

 const total = cart.reduce((sum, i) => sum + i.value, 0);
 const fullMessage = `Ol√°! Gostaria de fazer um pedido:%0A%0A${message}%0A%0ATotal: R$ ${total.toFixed(2).replace('.', ',')}`;

 window.open(`https://wa.me/${whatsappNumber}?text=${fullMessage}`, "_blank");
});

// Renderiza o carrinho inicial ao carregar a p√°gina
document.addEventListener('DOMContentLoaded', renderCart);
// Tamb√©m garante que as imagens padr√£o estejam corretas ao carregar
document.addEventListener('DOMContentLoaded', () => {
 productCheckboxes.forEach(checkbox => {
  // Se um item estiver pre-selecionado (ou seja o √∫nico), garante que a imagem correta seja carregada.
  if (checkbox.checked) {
   updateCardImage(checkbox);
  }
 });
});
</script>
</body>

</html>